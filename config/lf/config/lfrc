set mouse true
set info time
set sortby time
set reverse true
set dirfirst false
set ifs "\n"
set previewer {{git rev-parse --show-toplevel}}/config/lf/previewer
set sixel true

map <c-home> top
map <c-end> bottom
map <tab> :toggle; down
map <esc> :unselect; clear
map <c-a> :unselect; invert
map <c-c> copy
map <c-x> cut
map <c-v> paste
map <c-z> zip
map <c-u> unzip
map <c-n> new-folder
map <c-o> reveal-in-system-file-manager
map <enter> rename
map <delete> delete

cmd new-folder %{{
  if test -z "$fs"; then
    printf " create new folder: " && read folder_name
    mkdir -p $folder_name && printf "new folder created"
  else
    printf " moves files to new folder: " && read folder_name
    mkdir -p $folder_name && mv $fs $folder_name && printf "files moved to new folder"
  fi
}}

cmd zip %{{
  printf " create zip archive: " && read zip_archive_name
  relative_files=$(for file in $fx; do printf "${file#$PWD/}\n"; done)
  zip -r "$zip_archive_name.zip" $relative_files && printf "zip archive created"
}}

cmd unzip %{{
  printf " unzip archive to new folder: " && read folder_name
  mkdir -p $folder_name && unzip $f -d $folder_name && printf "archive unzipped"
}}

cmd reveal-in-system-file-manager &{{
  {{os_status wsl && echo true || echo false}} && explorer.exe /select,$f
  {{os_status mac-os && echo true || echo false}} && open -R $f
}}
